# 기능 명세: 선택적 멀티모달 AI 데이터 추출 및 사용자 확인 시스템

## 1. 개요
사용자가 최대 3장의 이미지를 업로드할 수 있으며, 그중 유저가 '데이터 추출' 옵션을 선택한 특정 이미지에서만 운동 데이터를 추출하여 입력 폼을 자동으로 채운다. 자동 입력 후에는 사용자의 최종 확인을 유도한다.

## 2. 사용자 시나리오 (UX Flow)
1. **이미지 업로드:** 사용자가 운동 인증 사진을 최대 3장까지 추가한다.
2. **AI 추출 선택:** 업로드된 이미지 하단에 'AI로 데이터 추출하기' 체크박스/토글이 노출된다. (이미지별 개별 선택 가능)
3. **데이터 분석:** 사용자가 옵션을 선택하면 해당 이미지 파일을 Gemini 1.5 Flash API로 전송한다.
4. **자동 입력 (Auto-fill):** 추출된 데이터를 앱 내 각 입력 필드(종목, 일자, 시간, 거리 등)의 상태값(State)으로 세팅한다.
5. **안내 메시지 노출:** 입력 폼 상단에 "AI가 데이터를 자동으로 입력했습니다. 내용을 확인하신 후 저장해 주세요."라는 안내 문구를 표시한다.
6. **최종 확인 및 저장:** 사용자가 데이터를 검토/수정한 후 직접 '저장' 버튼을 눌러 완료한다.

## 3. UI/UX 요구사항
- **이미지 슬롯:** 각 이미지 미리보기 하단에 `AI 추출` 선택 UI 배치.
- **로딩 상태:** API 호출 중에는 해당 필드 또는 전체 폼에 Skeleton UI나 로딩 인디케이터 표시.
- **안내 배너:** 데이터 입력 직후 사용자 시야에 잘 띄는 곳(예: 저장 버튼 위 또는 폼 상단)에 확인 요청 메시지 배치.

## 4. 기술적 로직 (Selection Logic)
- **추출 대상 제어:** `onChange` 이벤트 발생 시, 선택된 이미지의 base64 데이터만 API의 `content`로 전달.
- **데이터 병합:** 이미 수동 입력된 값이 있더라도 AI 추출 값으로 덮어쓰되, 유저가 수정할 수 있는 상태를 유지함.

## 5. 종목별 데이터 스키마 (v2 업데이트)
이미지 분석 시 아래 종목별 필수/선택 필드를 구분하여 JSON으로 반환받음:
- **공통:** exercise_type, date, duration(h, m, s), avg_hr
- **러닝/트레드밀:** cadence(spm) 추가
- **수영:** distance(단위: m), swolf 추가 (단위 변환 로직 포함)
- **사이클/등산:** distance(단위: km)